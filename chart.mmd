%%{ init: { "theme": "default" } }%%
flowchart LR
  A([開始]) --> B[初期化]
  B --> C{"モード選択\n（電圧／抵抗）"}

  subgraph 電圧測定["電圧測定"]
    direction TB
    V1[ADC取得 → 電圧変換]
    V2["+xx.xx V"表示]
    V3[ブザー停止]
    V1 --> V2 --> V3 --> C
  end
  C -- 電圧 --> 電圧測定

  subgraph 抵抗測定["抵抗測定"]
    direction TB
    R1[ADC取得 → mV計算]
    R2{"目標範囲内か？\n（500–1500 mV）"}
    R2 -- いいえ --> R3[レンジ調整]
    R3 --> R1
    R2 -- はい --> R4[抵抗計算]
    R5["xx kΩ"表示] --> R6[ブザー警告\n（≤80Ω）]
    R4 --> R5 --> R6 --> C
  end
  C -- 抵抗 --> 抵抗測定
